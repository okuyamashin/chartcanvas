<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ヒストグラムサンプル（提案1: 生データ形式）</title>
    <script src="../../chartcanvas.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #chart_div {
            border: 1px solid #ccc;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>ヒストグラムサンプル（提案1: 生データ形式）</h1>
    <p>TSVファイルから生データを読み込んでヒストグラムを表示します。</p>
    
    <div id="chart_div"></div>

    <script>
        window.addEventListener('DOMContentLoaded', async () => {
            const chart_div = document.getElementById('chart_div');
            const chart = new ChartCanvas(chart_div);
            chart.size(1024, 600);
            chart.title = '売上の分布';
            chart.subtitle = '全店舗の売上データ';

            const histogram = chart.addHistogram();
            histogram.xAxisTitle = '売上';
            histogram.yAxisTitle = '頻度';
            histogram.xAxisFormat = '#,##0';
            histogram.yAxisFormat = '#,##0';
            histogram.title = '売上の分布';
            histogram.subtitle = '全店舗の売上データ';

            // TSVローダーを使用してデータを読み込む
            const loader = histogram.tsvLoader('./data-histogram.tsv');
            loader.valueTitle = '値';

            try {
                await loader.load();
                chart.render();
            } catch (error) {
                console.error('TSVファイルの読み込みエラー:', error);
                chart.render();
            }
        });
    </script>
</body>
</html>

